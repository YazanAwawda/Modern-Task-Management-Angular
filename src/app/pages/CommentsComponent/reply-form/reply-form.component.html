<ng-container *ngIf="comment !== undefined"
              class="shadow-lg p-3 mb-5 bg-body rounded">


                      <div class="flex-grow-1 flex-shrink-1" >
                        <div>

                            <div class="mb-3 d-flex justify-content-between align-items-center">
                            <div>
                                <div>
                                    <img class="rounded-circle shadow-1-strong me-3"
                                         style="margin:5px;"

                                         src="https://img.freepik.com/free-psd/3d-illustration-person-with-glasses_23-2149436189.jpg?w=740&t=st=1692818036~exp=1692818636~hmac=f345adba403bfefe44957c21ab22df69552f887df097d1f1cc4f6cbdc368b423" alt="avatar" width="65"
                                         height="65" />
<p class="d-inline p-2">                        {{comment.username}}</p>
                                 </div>
                               <div style="padding-left:100px;" >
                                   <div>
                                       <p class="d-inline p-2 small mb-3"
                                          *ngIf="!hiddenComment[comment.id]" >
                                        <span class="wrap-text">
                                             {{comment.content}}
                                        </span>
                                       </p>
                                   </div>


<div style="margin-top:10px;">
    <p class="d-inline p-2" style="position: -ms-device-fixed">
        <button style="border:none" (click)="toggleEdit(comment!)" class=" badge bg-primary"><i class="fas fa-reply fa-xs"></i>
            <span class="small">
                                Edit
                              </span>
        </button>
    </p>
    <p class="d-inline p-2"  style="position: -ms-device-fixed">
        <button  style="border:none" (click)="toggleReplies(comment?.id)" class=" badge bg-success"><i class="fas fa-reply fa-xs"></i>
            <span class="small">
                                Reply
                              </span>
        </button>
    </p>
    <p class="d-inline p-2"  style="position: -ms-device-fixed">
        <button style="border:none" (click)="deleteComment(comment!.id)" class=" badge bg-danger"><i class="fas fa-reply fa-xs"></i>
            <span class="small">
                                Del
                              </span>
        </button>
    </p>
</div>



                               </div>

                            </div>
                          </div>




                        </div>

                        <div *ngIf="hiddenComment[comment.id]">
               <form (ngSubmit)="editComment(comment)"  [formGroup]="editFormGroup">

                 <div>
                                 <textarea
                                   formControlName = "content"
                                   class="form-control"></textarea>
                 </div>

<div style="margin-bottom: 15px; margin-top: 5px;">
  <p class="d-inline p-2">
    <button class=" bg-info bg-opacity-75 text-dark" style="border:none ;" type="submit" >Save</button>
  </p>
  <p class="d-inline p-2">
    <button class=" bg-warning bg-opacity-75 text-dark" style="border:none"
            type="button" (click)="cancelEdit(comment)">Cancel</button>
  </p>
</div>


               </form>
                        </div>
                        <div *ngIf="hiddenReply[comment.id]">

                          <form (ngSubmit)="postReply(comment.id , $event ,comment)"
                                [formGroup]="editFormGroup">
                            <br>
                            <div>
                                 <textarea
                                   formControlName="content"
                                   class="form-control">
                                 </textarea>
                            </div>

                            <div style="margin-bottom: 15px; margin-top: 5px;">
                              <p class="d-inline p-2">
                                <button class=" bg-info bg-opacity-75 text-dark"
                                        style="border:none" type="submit" >Save</button>
                              </p>
                              <p class="d-inline p-2">
                                <button class=" bg-warning bg-opacity-75 text-dark" style="border:none" type="button" (click)=" cancelReply(comment)">Cancel</button>
                              </p>
                            </div>
                          </form>
                        </div>
                      </div>
  <ng-container *ngIf="comment.replies">
      <div class="ps-3">
<ng-container  *ngFor="let reply of comment.replies">
    <!-- ðŸš¨ Note the usage of component inside same component -->
    <app-reply-form *ngIf="(comment?.replies)"
                    [taskId]="taskId"
                    [comment] ="reply"></app-reply-form>
  </ng-container>
      </div>

  </ng-container>
</ng-container>
